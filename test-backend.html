<!DOCTYPE html>
<html>
<head>
    <title>Backend Connection Test</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        button { padding: 10px 20px; font-size: 16px; }
        #result { margin-top: 20px; padding: 10px; border: 1px solid #ccc; }
        .success { color: green; }
        .error { color: red; }
    </style>
</head>
<body>
    <h1>Backend Connection Test</h1>
    <button onclick="testConnection()">Test Connection</button>
    <div id="result">Click the button to test the backend connection...</div>

    <script>
        function log(message) {
            console.log(message);
            const resultDiv = document.getElementById('result');
            resultDiv.innerHTML += '<br>' + message;
        }

        async function testConnection() {
            const resultDiv = document.getElementById('result');
            resultDiv.innerHTML = '<h3>🔍 Testing Backend Connection...</h3>';
            
                const backendUrl = 'https://bookyolo-backend.vercel.app';
            
            try {
                // Test 1: Basic endpoint
                log('📡 Testing basic endpoint: ' + backendUrl + '/');
                const response1 = await fetch(backendUrl + '/');
                log('✅ Basic endpoint status: ' + response1.status);
                
                if (response1.ok) {
                    const data1 = await response1.json();
                    log('📄 Basic endpoint response: ' + JSON.stringify(data1, null, 2));
                } else {
                    log('❌ Basic endpoint failed with status: ' + response1.status);
                }
                
                // Test 2: Health endpoint  
                log('📡 Testing health endpoint: ' + backendUrl + '/health');
                const response2 = await fetch(backendUrl + '/health');
                log('✅ Health endpoint status: ' + response2.status);
                
                if (response2.ok) {
                    const data2 = await response2.json();
                    log('📄 Health endpoint response: ' + JSON.stringify(data2, null, 2));
                } else {
                    log('❌ Health endpoint failed with status: ' + response2.status);
                }
                
                // Test 3: Login endpoint (should get 422 for missing data, not 404)
                log('📡 Testing login endpoint: ' + backendUrl + '/auth/login');
                const response3 = await fetch(backendUrl + '/auth/login', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({})
                });
                log('✅ Login endpoint status: ' + response3.status + ' (should be 422, not 404)');
                
                const data3 = await response3.json();
                log('📄 Login endpoint response: ' + JSON.stringify(data3, null, 2));
                
                // Summary
                if (response1.ok && response2.ok && response3.status === 422) {
                    log('🎉 SUCCESS: All tests passed! Backend is working correctly.');
                    log('✅ You can now update your frontend to use: ' + backendUrl);
                } else {
                    log('⚠️ Some tests failed. Check the results above.');
                }
                
            } catch (error) {
                log('❌ Connection test failed: ' + error.message);
                log('🔍 Make sure the backend URL is correct and accessible.');
            }
        }
    </script>
</body>
</html>
